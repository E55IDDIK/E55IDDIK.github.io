/*! 12.0.4 */
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var r=n(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.0.4",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,t,n){function r(r){function i(e){u.notify&&u.notify(e),f.progressFunc&&n((function(){f.progressFunc(e)}))}function l(e){return null!=r._start&&o?{loaded:e.loaded+r._start,total:r._file&&r._file.size||e.total,type:e.type,config:r,lengthComputable:!0,target:e.target}:e}function s(){e(r).then((function(e){o&&r._chunkSize&&!r._finished&&r._file?(i({loaded:r._end,total:r._file&&r._file.size,config:r,type:"progress"}),a.upload(r,!0)):(r._finished&&delete r._finished,u.resolve(e))}),(function(e){u.reject(e)}),(function(e){u.notify(e)}))}r.method=r.method||"POST",r.headers=r.headers||{};var u=r._deferred=r._deferred||t.defer(),f=u.promise;return r.disableProgress||(r.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",(function(e){e.config=r,i(l(e))}),!1),e.upload.addEventListener("load",(function(e){e.lengthComputable&&(e.config=r,i(l(e)))}),!1))}}),o?r._chunkSize&&r._end&&!r._finished?(r._start=r._end,r._end+=r._chunkSize,s()):r.resumeSizeUrl?e.get(r.resumeSizeUrl).then((function(e){r._start=r.resumeSizeResponseReader?r.resumeSizeResponseReader(e.data):parseInt((null==e.data.size?e.data:e.data.size).toString()),r._chunkSize&&(r._end=r._start+r._chunkSize),s()}),(function(e){throw e})):r.resumeSize?r.resumeSize().then((function(e){r._start=e,s()}),(function(e){throw e})):(r._chunkSize&&(r._start=0,r._end=r._start+r._chunkSize),s()):s(),f.success=function(e){return f.then((function(t){e(t.data,t.status,t.headers,r)})),f},f.error=function(e){return f.then(null,(function(t){e(t.data,t.status,t.headers,r)})),f},f.progress=function(e){return f.progressFunc=e,f.then(null,null,(function(t){e(t)})),f},f.abort=f.pause=function(){return r.__XHR&&n((function(){r.__XHR.abort()})),f},f.xhr=function(e){return r.xhrFn=function(t){return function(){t&&t.apply(f,arguments),e.apply(f,arguments)}}(r.xhrFn),f},a.promisesCount++,f.finally((function(){a.promisesCount--})),f}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var a=this;a.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var o=this.isResumeSupported();this.isUploadInProgress=function(){return a.promisesCount>0},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(e,t){function n(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&o){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var r=t.slice(e._start,e._end||t.size);return r.name=t.name,r.ngfName=t.ngfName,e._chunkSize&&(n.append("_chunkSize",e._chunkSize),n.append("_currentChunkSize",e._end-e._start),n.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),n.append("_totalSize",e._file.size)),r}return t}function l(t,r,i){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))t.append(i,r);else if(a.isFile(r)){var o=n(r,t),s=i.split(",");s[1]&&(o.ngfName=s[1].replace(/^\s+|\s+$/g,""),i=s[0]),e._fileKey=e._fileKey||i,t.append(i,o,o.ngfName||o.name)}else if(angular.isObject(r)){if(r.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+i;r.$$ngfCircularDetection=!0;try{for(var u in r)if(r.hasOwnProperty(u)&&"$$ngfCircularDetection"!==u){var f=null==e.objectKey?"[i]":e.objectKey;r.length&&parseInt(u)>-1&&(f=null==e.arrayKey?f:e.arrayKey),l(t,r[u],i+f.replace(/[ik]/g,u))}}finally{delete r.$$ngfCircularDetection}}else t.append(i,r)}return t||(e=i(e)),e._isDigested||(e._isDigested=!0,e._chunkSize=a.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push((function(t){var n,r=new window.FormData;for(n in t=t||e.fields||{},e.file&&(t.file=e.file),t)if(t.hasOwnProperty(n)){var i=t[n];e.formDataAppender?e.formDataAppender(r,n,i):l(r,i,n)}return r}))),r(e)},this.http=function(t){return(t=i(t)).transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof window.Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=a.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,r(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var r=t.defer();return e({url:n,method:"get",responseType:"arraybuffer"}).then((function(e){var t=new Uint8Array(e.data),n=e.headers("content-type")||"image/WebP",i=new window.Blob([t],{type:n});r.resolve(i)}),(function(e){r.reject(e)})),r.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(e,t,n,r,i){function a(e,t,n){var i=[s.emptyPromise()];return angular.forEach(e,(function(r,a){0===r.type.indexOf("image/jpeg")&&s.attrGetter("ngfFixOrientation",t,n,{$file:r})&&i.push(s.happyPromise(s.applyExifRotation(r),r).then((function(t){e.splice(a,1,t)})))})),r.all(i)}function o(e,t,n){var i=s.attrGetter("ngfResize",t,n);if(!i||!s.isResizeSupported()||!e.length)return s.emptyPromise();if(!(i instanceof Function))return l(i,e,t,n);var a=r.defer();i(e).then((function(r){l(r,e,t,n).then((function(e){a.resolve(e)}),(function(e){a.reject(e)}))}),(function(e){a.reject(e)}))}function l(e,t,n,i){function a(r,a){if(0===r.type.indexOf("image")){if(e.pattern&&!s.validatePattern(r,e.pattern))return;var l=s.resize(r,e.width,e.height,e.quality,e.type,e.ratio,e.centerCrop,(function(e,t){return s.attrGetter("ngfResizeIf",n,i,{$width:e,$height:t,$file:r})}),!1!==e.restoreExif);o.push(l),l.then((function(e){t.splice(a,1,e)}),(function(e){r.$error="resize",r.$errorParam=(e?(e.message?e.message:e)+": ":"")+(r&&r.name)}))}}for(var o=[s.emptyPromise()],l=0;l<t.length;l++)a(t[l],l);return r.all(o)}var s=i;return s.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=s.defaults[t];return null==n||angular.isString(n)?n:JSON.stringify(n)},s.attrGetter=function(t,n,r,i){var a=this.getAttrWithDefaults(n,t);if(!r)return a;try{return i?e(a)(r,i):e(a)(r)}catch(e){if(t.search(/min|max|pattern/i))return a;throw e}},s.shouldUpdateOn=function(e,t,n){var r=s.attrGetter("ngModelOptions",t,n);return!r||!r.updateOn||r.updateOn.split(" ").indexOf(e)>-1},s.emptyPromise=function(){var e=r.defer(),n=arguments;return t((function(){e.resolve.apply(e,n)})),e.promise},s.rejectPromise=function(){var e=r.defer(),n=arguments;return t((function(){e.reject.apply(e,n)})),e.promise},s.happyPromise=function(e,n){var i=r.defer();return e.then((function(e){i.resolve(e)}),(function(e){t((function(){throw e})),i.resolve(n)})),i.promise},s.updateModel=function(n,r,i,l,u,f,c){function d(a,o,u,c,d){r.$$ngfPrevValidFiles=a,r.$$ngfPrevInvalidFiles=o;var g=a&&a.length?a[0]:null,h=o&&o.length?o[0]:null;n&&(s.applyModelValidation(n,a),n.$setViewValue(d?g:a)),l&&e(l)(i,{$files:a,$file:g,$newFiles:u,$duplicateFiles:c,$invalidFiles:o,$invalidFile:h,$event:f});var p=s.attrGetter("ngfModelInvalid",r);p&&t((function(){e(p).assign(i,d?h:o)})),t((function(){}))}function g(){b=[],y=[],angular.forEach(p,(function(e){e.$error?y.push(e):b.push(e)}))}function h(){function e(){t((function(){d(w?m.concat(b):b,w?v.concat(y):y,u,$,U)}),S&&S.debounce?S.debounce.change||S.debounce:0)}o(x?p:b,r,i).then((function(){x?s.validate(p,m.length,n,r,i).then((function(){g(),e()})):e()}),(function(e){throw"Could not resize files "+e}))}var p,m,v,$=[],y=[],b=[];m=r.$$ngfPrevValidFiles||[],v=r.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(m=function(e){return angular.isArray(e)?e:[e]}(n.$modelValue));var w=s.attrGetter("ngfKeep",r,i);p=(u||[]).slice(0),("distinct"===w||!0===s.attrGetter("ngfKeepDistinct",r,i))&&function(){function e(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function t(t){var n;for(n=0;n<m.length;n++)if(e(t,m[n]))return!0;for(n=0;n<v.length;n++)if(e(t,v[n]))return!0;return!1}if(u){p=[],$=[];for(var n=0;n<u.length;n++)t(u[n])?$.push(u[n]):p.push(u[n])}}();var U=!w&&!s.attrGetter("ngfMultiple",r,i)&&!s.attrGetter("multiple",r);if(!w||p.length){s.attrGetter("ngfBeforeModelChange",r,i,{$files:u,$file:u&&u.length?u[0]:null,$newFiles:p,$duplicateFiles:$,$event:f});var x=s.attrGetter("ngfValidateAfterResize",r,i),S=s.attrGetter("ngModelOptions",r,i);s.validate(p,m.length,n,r,i).then((function(){c?d(p,[],u,$,U):(S&&S.allowInvalid||x?b=p:g(),s.attrGetter("ngfFixOrientation",r,i)&&s.isExifSupported()?a(b,r,i).then((function(){h()})):h())}))}},s}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,r){function i(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=r.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function a(e,t,n,r,a,l,s,u){function f(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function c(){return h("ngfChange")||h("ngfSelect")}function d(t){if(u.shouldUpdateOn("change",n,e)){for(var i=t.__files_||t.target&&t.target.files,a=[],o=0;o<i.length;o++)a.push(i[o]);u.updateModel(r,n,e,c(),a.length?a:null,t)}}function g(t){u.shouldUpdateOn("click",n,e)&&v.val()&&(v.val(null),u.updateModel(r,n,e,c(),null,t,!0))}var h=function(e,t){return u.attrGetter(e,n,t)};u.registerModelChangeValidator(r,n,e);var p=[];p.push(e.$watch(h("ngfMultiple"),(function(){v.attr("multiple",h("ngfMultiple",e))}))),p.push(e.$watch(h("ngfCapture"),(function(){v.attr("capture",h("ngfCapture",e))}))),p.push(e.$watch(h("ngfAccept"),(function(){v.attr("accept",h("ngfAccept",e))}))),n.$observe("accept",(function(){v.attr("accept",h("accept"))})),p.push((function(){n.$$observers&&delete n.$$observers.accept}));var m=0,v=t;f()||(v=function(){if(f())return t;var e=angular.element('<input type="file">');!function(e){if(t!==e)for(var n=0;n<t[0].attributes.length;n++){var r=t[0].attributes[n];"type"!==r.name&&"class"!==r.name&&"style"!==r.name&&((null==r.value||""===r.value)&&("required"===r.name&&(r.value="required"),"multiple"===r.name&&(r.value="multiple")),e.attr(r.name,"id"===r.name?"ngf-"+r.value:r.value))}}(e);var n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),o.push({el:t,ref:n}),document.body.appendChild(n.append(e)[0]),e}()),v.bind("change",d),f()?t.bind("click",g):t.bind("click touchstart touchend",(function(n){if(t.attr("disabled"))return!1;if(!h("ngfSelectDisabled",e)){var r=function(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if("touchstart"===e.type)return m=t?t[0].clientY:0,!0;if(e.stopPropagation(),e.preventDefault(),"touchend"===e.type){var n=t?t[0].clientY:0;if(Math.abs(n-m)>20)return!1}}(n);if(null!=r)return r;g(n);try{f()||document.body.contains(v[0])||(o.push({el:t,ref:v.parent()}),document.body.appendChild(v.parent()[0]),v.bind("change",d))}catch(e){}return i(navigator.userAgent)?setTimeout((function(){v[0].click()}),0):v[0].click(),!1}})),-1!==navigator.appVersion.indexOf("MSIE 10")&&v.bind("click",(function e(t){if(v&&!v.attr("__ngf_ie10_Fix_")){if(!v[0].parentNode)return void(v=null);t.preventDefault(),t.stopPropagation(),v.unbind("click");var n=v.clone();return v.replaceWith(n),(v=n).attr("__ngf_ie10_Fix_","true"),v.bind("change",d),v.bind("click",e),v[0].click(),!1}v.removeAttr("__ngf_ie10_Fix_")})),r&&r.$formatters.push((function(e){return(null==e||0===e.length)&&v.val()&&v.val(null),e})),e.$on("$destroy",(function(){f()||v.parent().remove(),angular.forEach(p,(function(e){e()}))})),l((function(){for(var e=0;e<o.length;e++){var t=o[e];document.body.contains(t.el[0])||(o.splice(e,1),t.ref.remove())}})),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,v,d)}var o=[];return{restrict:"AEC",require:"?ngModel",link:function(e,n,i,o){a(e,n,i,o,0,t,0,r)}}}]),function(){function e(e,t,n,r,i,a,o,l){function s(a){var o=e.attrGetter("ngfNoObjectUrl",i,n);e.dataUrl(a,o).finally((function(){t((function(){var e=(o?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;l?r.css("background-image","url('"+(e||"")+"')"):r.attr("src",e),e?r.removeClass("ng-hide"):r.addClass("ng-hide")}))}))}t((function(){var t=n.$watch(i[a],(function(t){var n=o;if("ngfThumbnail"===a&&(n||(n={width:r[0].clientWidth,height:r[0].clientHeight}),0===n.width&&window.getComputedStyle)){var i=getComputedStyle(r[0]);n={width:parseInt(i.width.slice(0,-2)),height:parseInt(i.height.slice(0,-2))}}return angular.isString(t)?(r.removeClass("ng-hide"),l?r.css("background-image","url('"+t+"')"):r.attr("src",t)):void(!t||!t.type||0!==t.type.search(function(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}(r[0]))||l&&0!==t.type.indexOf("image")?r.addClass("ng-hide"):n&&e.isResizeSupported()?e.resize(t,n.width,n.height,n.quality).then((function(e){s(e)}),(function(e){throw e})):s(t))}));n.$on("$destroy",(function(){t()}))}))}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var r=e;return r.base64DataUrl=function(e){if(angular.isArray(e)){var t=n.defer(),i=0;return angular.forEach(e,(function(n){r.dataUrl(n,!0).finally((function(){if(++i===e.length){var n=[];angular.forEach(e,(function(e){n.push(e.$ngfDataUrl)})),t.resolve(n,e)}}))})),t.promise}return r.dataUrl(e,!0)},r.dataUrl=function(e,i){if(!e)return r.emptyPromise(e,e);if(i&&null!=e.$ngfDataUrl||!i&&null!=e.$ngfBlobUrl)return r.emptyPromise(i?e.$ngfDataUrl:e.$ngfBlobUrl,e);var a=i?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(a)return a;var o=n.defer();return t((function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!i){var a;try{a=n.createObjectURL(e)}catch(n){return void t((function(){e.$ngfBlobUrl="",o.reject()}))}t((function(){if(e.$ngfBlobUrl=a,a){o.resolve(a,e),r.blobUrls=r.blobUrls||[],r.blobUrlsTotalSize=r.blobUrlsTotalSize||0,r.blobUrls.push({url:a,size:e.size}),r.blobUrlsTotalSize+=e.size||0;for(var t=r.defaults.blobUrlsMaxMemory||268435456,i=r.defaults.blobUrlsMaxQueueSize||200;(r.blobUrlsTotalSize>t||r.blobUrls.length>i)&&r.blobUrls.length>1;){var l=r.blobUrls.splice(0,1)[0];n.revokeObjectURL(l.url),r.blobUrlsTotalSize-=l.size}}}))}else{var l=new FileReader;l.onload=function(n){t((function(){e.$ngfDataUrl=n.target.result,o.resolve(n.target.result,e),t((function(){delete e.$ngfDataUrl}),1e3)}))},l.onerror=function(){t((function(){e.$ngfDataUrl="",o.reject()}))},l.readAsDataURL(e)}}else t((function(){e[i?"$ngfDataUrl":"$ngfBlobUrl"]="",o.reject()}))})),(a=i?e.$$ngfDataUrlPromise=o.promise:e.$$ngfBlobUrlPromise=o.promise).finally((function(){delete e[i?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]})),a},r}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(t,n){return{restrict:"AE",link:function(r,i,a){e(t,n,r,i,a,"ngfSrc",t.attrGetter("ngfResize",a,r),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(t,n){return{restrict:"AE",link:function(r,i,a){e(t,n,r,i,a,"ngfBackground",t.attrGetter("ngfResize",a,r),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(t,n){return{restrict:"AE",link:function(r,i,a){var o=t.attrGetter("ngfSize",a,r);e(t,n,r,i,a,"ngfThumbnail",o,t.attrGetter("ngfAsBackground",a,r))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,t){return function(n,r,i){if(angular.isString(n))return t.trustAsResourceUrl(n);var a=n&&((r?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!a?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,e.dataUrl(n,r)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&a?i?t.trustAsResourceUrl(a):a:n)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function r(e){var t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var a=0;a<i.length;a++){var o=r(i[a]);o.regexp?(t+="("+o.regexp+")",a<i.length-1&&(t+="|")):n=n.concat(o.excludes)}else 0===e.indexOf("!")?n.push("^((?!"+r(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t=(t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}var i=e;return i.validatePattern=function(e,t){if(!t)return!0;var n=r(t),i=!0;if(n.regexp&&n.regexp.length){var a=new RegExp(n.regexp,"i");i=null!=e.type&&a.test(e.type)||null!=e.name&&a.test(e.name)}for(var o=n.excludes.length;o--;){var l=new RegExp(n.excludes[o],"i");i=i&&(null==e.type||l.test(e.type))&&(null==e.name||l.test(e.name))}return i},i.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return n>-1?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},i.registerModelChangeValidator=function(e,t,n){e&&e.$formatters.push((function(r){e.$dirty&&(r&&!angular.isArray(r)&&(r=[r]),i.validate(r,0,e,t,n).then((function(){i.applyModelValidation(e,r)})))}))},i.applyModelValidation=function(e,t){(function(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)})(e,t),angular.forEach(e.$ngfValidations,(function(t){e.$setValidity(t.name,t.valid)}))},i.getValidationAttr=function(e,t,n,r,a){var o="ngf"+n[0].toUpperCase()+n.substr(1),l=i.attrGetter(o,e,t,{$file:a});if(null==l&&(l=i.attrGetter("ngfValidate",e,t,{$file:a}))){var s=(r||n).split(".");l=l[s[0]],s.length>1&&(l=l&&l[s[1]])}return l},i.validate=function(e,n,r,a,o){function l(t,n,l){if(e){for(var s=e.length,u=null;s--;){var f=e[s];if(f){var c=i.getValidationAttr(a,o,t,n,f);null!=c&&(l(f,c,s)||(f.$error=t,(f.$errorMessages=f.$errorMessages||{})[t]=!0,f.$errorParam=c,e.splice(s,1),u=!1))}}null!==u&&r.$ngfValidations.push({name:t,valid:u})}}function s(n,l,s,f,c){function d(e,t,r){null!=r?f(t,r).then((function(i){c(i,r)?e.resolve():(t.$error=n,(t.$errorMessages=t.$errorMessages||{})[n]=!0,t.$errorParam=r,e.reject())}),(function(){u("ngfValidateForce",{$file:t})?(t.$error=n,(t.$errorMessages=t.$errorMessages||{})[n]=!0,t.$errorParam=r,e.reject()):e.resolve()})):e.resolve()}var g=[i.emptyPromise()];return e?(e=void 0===e.length?[e]:e,angular.forEach(e,(function(e){var r=t.defer();return g.push(r.promise),!s||null!=e.type&&0===e.type.search(s)?void("dimensions"===n&&null!=i.attrGetter("ngfDimensions",a)?i.imageDimensions(e).then((function(t){d(r,e,u("ngfDimensions",{$file:e,$width:t.width,$height:t.height}))}),(function(){r.reject()})):"duration"===n&&null!=i.attrGetter("ngfDuration",a)?i.mediaDuration(e).then((function(t){d(r,e,u("ngfDuration",{$file:e,$duration:t}))}),(function(){r.reject()})):d(r,e,i.getValidationAttr(a,o,n,l,e))):void r.resolve()})),t.all(g).then((function(){r.$ngfValidations.push({name:n,valid:!0})}),(function(){r.$ngfValidations.push({name:n,valid:!1})}))):void 0}(r=r||{}).$ngfValidations=r.$ngfValidations||[],angular.forEach(r.$ngfValidations,(function(e){e.valid=!0}));var u=function(e,t){return i.attrGetter(e,a,o,t)};if(null==e||0===e.length)return i.emptyPromise(r);e=void 0===e.length?[e]:e.slice(0),l("maxFiles",null,(function(e,t,r){return t>n+r})),l("pattern",null,i.validatePattern),l("minSize","size.min",(function(e,t){return e.size+.1>=i.translateScalars(t)})),l("maxSize","size.max",(function(e,t){return e.size-.1<=i.translateScalars(t)}));var f=0;if(l("maxTotalSize",null,(function(t,n){return!((f+=t.size)>i.translateScalars(n))||(e.splice(0,e.length),!1)})),l("validateFn",null,(function(e,t){return!0===t||null===t||""===t})),!e.length)return i.emptyPromise(r,r.$ngfValidations);var c=t.defer(),d=[];return d.push(i.happyPromise(s("maxHeight","height.max",/image/,this.imageDimensions,(function(e,t){return e.height<=t})))),d.push(i.happyPromise(s("minHeight","height.min",/image/,this.imageDimensions,(function(e,t){return e.height>=t})))),d.push(i.happyPromise(s("maxWidth","width.max",/image/,this.imageDimensions,(function(e,t){return e.width<=t})))),d.push(i.happyPromise(s("minWidth","width.min",/image/,this.imageDimensions,(function(e,t){return e.width>=t})))),d.push(i.happyPromise(s("dimensions",null,/image/,(function(e,t){return i.emptyPromise(t)}),(function(e){return e})))),d.push(i.happyPromise(s("ratio",null,/image/,this.imageDimensions,(function(e,t){for(var n=t.toString().split(","),r=!1,a=0;a<n.length;a++)Math.abs(e.width/e.height-i.ratioToFloat(n[a]))<1e-4&&(r=!0);return r})))),d.push(i.happyPromise(s("maxRatio","ratio.max",/image/,this.imageDimensions,(function(e,t){return e.width/e.height-i.ratioToFloat(t)<1e-4})))),d.push(i.happyPromise(s("minRatio","ratio.min",/image/,this.imageDimensions,(function(e,t){return e.width/e.height-i.ratioToFloat(t)>-1e-4})))),d.push(i.happyPromise(s("maxDuration","duration.max",/audio|video/,this.mediaDuration,(function(e,t){return e<=i.translateScalars(t)})))),d.push(i.happyPromise(s("minDuration","duration.min",/audio|video/,this.mediaDuration,(function(e,t){return e>=i.translateScalars(t)})))),d.push(i.happyPromise(s("duration",null,/audio|video/,(function(e,t){return i.emptyPromise(t)}),(function(e){return e})))),d.push(i.happyPromise(s("validateAsyncFn",null,null,(function(e,t){return t}),(function(e){return!0===e||null===e||""===e})))),t.all(d).then((function(){c.resolve(r,r.$ngfValidations)}))},i.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var r=t.defer();return n((function(){r.resolve({width:e.$ngfWidth,height:e.$ngfHeight})})),r.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var a=t.defer();return n((function(){return 0!==e.type.indexOf("image")?void a.reject("not image"):void i.dataUrl(e).then((function(t){function r(){var t=o[0].clientWidth,n=o[0].clientHeight;o.remove(),e.$ngfWidth=t,e.$ngfHeight=n,a.resolve({width:t,height:n})}function i(){o.remove(),a.reject("load error")}var o=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");o.on("load",r),o.on("error",i);var l=0;(function e(){n((function(){o[0].parentNode&&(o[0].clientWidth?r():l>10?i():e())}),1e3)})(),angular.element(document.getElementsByTagName("body")[0]).append(o)}),(function(){a.reject("load error")}))})),e.$ngfDimensionPromise=a.promise,e.$ngfDimensionPromise.finally((function(){delete e.$ngfDimensionPromise})),e.$ngfDimensionPromise},i.mediaDuration=function(e){if(e.$ngfDuration){var r=t.defer();return n((function(){r.resolve(e.$ngfDuration)})),r.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var a=t.defer();return n((function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void a.reject("not media"):void i.dataUrl(e).then((function(t){function r(){var t=o[0].duration;e.$ngfDuration=t,o.remove(),a.resolve(t)}function i(){o.remove(),a.reject("load error")}var o=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");o.on("loadedmetadata",r),o.on("error",i);var l=0;(function e(){n((function(){o[0].parentNode&&(o[0].duration?r():l>10?i():e())}),1e3)})(),angular.element(document.body).append(o)}),(function(){a.reject("load error")}))})),e.$ngfDurationPromise=a.promise,e.$ngfDurationPromise.finally((function(){delete e.$ngfDurationPromise})),e.$ngfDurationPromise},i}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var n=e,r=function(e,r,i,a,o,l,s,u){var f=t.defer(),c=document.createElement("canvas"),d=document.createElement("img");return d.onload=function(){if(null==u||!1!==u(d.width,d.height))try{if(l){var e=n.ratioToFloat(l);e>d.width/d.height?(r=d.width,i=r/e):(i=d.height,r=i*e)}r||(r=d.width),i||(i=d.height);var t=function(e,t,n,r,i){var a=i?Math.max(n/e,r/t):Math.min(n/e,r/t);return{width:e*a,height:t*a,marginX:e*a-n,marginY:t*a-r}}(d.width,d.height,r,i,s);c.width=Math.min(t.width,r),c.height=Math.min(t.height,i),c.getContext("2d").drawImage(d,Math.min(0,-t.marginX/2),Math.min(0,-t.marginY/2),t.width,t.height),f.resolve(c.toDataURL(o||"image/WebP",a||.934))}catch(e){f.reject(e)}else f.reject("resizeIf")},d.onerror=function(){f.reject()},d.src=e,f.promise};return n.dataUrltoBlob=function(e,t,n){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,l=new Uint8Array(o);o--;)l[o]=a.charCodeAt(o);var s=new window.Blob([l],{type:i});return s.name=t,s.$ngfOrigSize=n,s},n.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),n.resize=function(e,i,a,o,l,s,u,f,c){if(0!==e.type.indexOf("image"))return n.emptyPromise(e);var d=t.defer();return n.dataUrl(e,!0).then((function(t){r(t,i,a,o,l||e.type,s,u,f).then((function(r){if("image/jpeg"===e.type&&c)try{r=n.restoreExif(t,r)}catch(e){setTimeout((function(){throw e}),1)}try{var i=n.dataUrltoBlob(r,e.name,e.size);d.resolve(i)}catch(e){d.reject(e)}}),(function(t){"resizeIf"===t&&d.resolve(e),d.reject(t)}))}),(function(e){d.reject(e)})),d.promise},n}]),function(){function e(e,n,r,i,a,o,l,s,u,f){function c(){return n.attr("disabled")||p("ngfDropDisabled",e)}function d(t,n){s.updateModel(i,r,e,p("ngfChange")||p("ngfDrop"),t,n)}function g(t,n){if(!s.shouldUpdateOn(t,r,e)||!n)return s.rejectPromise([]);var i=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,(function(e,t,n){i.push(n)}));var a=[],o=[];if(i.length){angular.forEach(i,(function(e){a.push(s.urlToBlob(e).then((function(e){o.push(e)})))}));var l=f.defer();return f.all(a).then((function(){l.resolve(o)}),(function(e){l.reject(e)})),l.promise}return s.emptyPromise()}var h=t(),p=function(e,t,n){return s.attrGetter(e,r,t,n)};if(p("dropAvailable")&&o((function(){e[p("dropAvailable")]?e[p("dropAvailable")].value=h:e[p("dropAvailable")]=h})),h){null==p("ngfSelect")&&s.registerModelChangeValidator(i,r,e);var m,v=null,$=a(p("ngfStopPropagation")),y=1;n[0].addEventListener("dragover",(function(t){if(!c()&&s.shouldUpdateOn("drop",r,e)){if(t.preventDefault(),$(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}o.cancel(v),m||(m="C",function(e,t,n,r){var i=p("ngfDragOverClass",e,{$event:n}),a="dragover";if(angular.isString(i))a=i;else if(i&&(i.delay&&(y=i.delay),i.accept||i.reject)){var o=n.dataTransfer.items;if(null!=o&&o.length)for(var l=i.pattern||p("ngfPattern",e,{$event:n}),u=o.length;u--;){if(!s.validatePattern(o[u],l)){a=i.reject;break}a=i.accept}else a=i.accept}r(a)}(e,0,t,(function(r){m=r,n.addClass(m),p("ngfDrag",e,{$isDragging:!0,$class:m,$event:t})})))}}),!1),n[0].addEventListener("dragenter",(function(t){!c()&&s.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),$(e)&&t.stopPropagation())}),!1),n[0].addEventListener("dragleave",(function(t){!c()&&s.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),$(e)&&t.stopPropagation(),v=o((function(){m&&n.removeClass(m),m=null,p("ngfDrag",e,{$isDragging:!1,$event:t})}),y||100))}),!1),n[0].addEventListener("drop",(function(t){if(!c()&&s.shouldUpdateOn("drop",r,e)){t.preventDefault(),$(e)&&t.stopPropagation(),m&&n.removeClass(m),m=null;var i,a=t.dataTransfer.items;try{i=t.dataTransfer&&t.dataTransfer.getData&&t.dataTransfer.getData("text/html")}catch(e){}(function(t,n,i,a){function o(e,t){var n=f.defer();if(null!=e)if(e.isDirectory){var r=[s.emptyPromise()];if(d){var i={type:"directory"};i.name=i.path=(t||"")+e.name+e.name,g.push(i)}var a=e.createReader(),l=[],p=function(){a.readEntries((function(i){try{i.length?(l=l.concat(Array.prototype.slice.call(i||[],0)),p()):(angular.forEach(l.slice(0),(function(n){g.length<=u&&c>=h&&r.push(o(n,(t||"")+e.name+"/"))})),f.all(r).then((function(){n.resolve()}),(function(e){n.reject(e)})))}catch(e){n.reject(e)}}),(function(e){n.reject(e)}))};p()}else e.file((function(e){try{e.path=(t||"")+e.name,d&&(e=s.rename(e,e.path)),g.push(e),h+=e.size,n.resolve()}catch(e){n.reject(e)}}),(function(e){n.reject(e)}));return n.promise}var u=s.getValidationAttr(r,e,"maxFiles")||Number.MAX_VALUE,c=s.getValidationAttr(r,e,"maxTotalSize")||Number.MAX_VALUE,d=p("ngfIncludeDir",e),g=[],h=0,m=[s.emptyPromise()];if(t&&t.length>0&&"file"!==l.protocol())for(var v=0;v<t.length;v++){if(t[v].webkitGetAsEntry&&t[v].webkitGetAsEntry()&&t[v].webkitGetAsEntry().isDirectory){var $=t[v].webkitGetAsEntry();if($.isDirectory&&!i)continue;null!=$&&m.push(o($))}else{var y=t[v].getAsFile();null!=y&&(g.push(y),h+=y.size)}if(g.length>u||h>c||!a&&g.length>0)break}else if(null!=n)for(var b=0;b<n.length;b++){var w=n.item(b);if((w.type||w.size>0)&&(g.push(w),h+=w.size),g.length>u||h>c||!a&&g.length>0)break}var U=f.defer();return f.all(m).then((function(){if(a||d||!g.length)U.resolve(g);else{for(var e=0;g[e]&&"directory"===g[e].type;)e++;U.resolve([g[e]])}}),(function(e){U.reject(e)})),U.promise})(a,t.dataTransfer.files,!1!==p("ngfAllowDir",e),p("multiple")||p("ngfMultiple",e)).then((function(e){e.length?d(e,t):g("dropUrl",i).then((function(e){d(e,t)}))}))}}),!1),n[0].addEventListener("paste",(function(t){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&p("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!c()&&s.shouldUpdateOn("paste",r,e)){var n=[],i=t.clipboardData||t.originalEvent.clipboardData;if(i&&i.items)for(var a=0;a<i.items.length;a++)-1!==i.items[a].type.indexOf("image")&&n.push(i.items[a].getAsFile());n.length?d(n,t):g("pasteUrl",i).then((function(e){d(e,t)}))}}),!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&p("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",(function(e){e.metaKey||e.ctrlKey||e.preventDefault()})))}else!0===p("ngfHideOnDropNotAvailable",e)&&n.css("display","none")}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(t,n,r,i,a,o){return{restrict:"AEC",require:"?ngModel",link:function(a,l,s,u){e(a,l,s,u,t,n,r,i,0,o)}}}]),ngFileUpload.directive("ngfNoFileDrop",(function(){return function(e,n){t()&&n.css("display","none")}})),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,r){return function(i,a,o){if(t()){var l=e(r.attrGetter("ngfDropAvailable",o));n((function(){l(i),l.assign&&l.assign(i,!0)}))}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,t){var n=e;return n.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&n.isResizeSupported()},n.readOrientation=function(e){var n=t.defer(),r=new FileReader,i=e.slice?e.slice(0,65536):e;return r.readAsArrayBuffer(i),r.onerror=function(e){return n.reject(e)},r.onload=function(e){var t={orientation:1},r=new DataView(this.result);if(65496!==r.getUint16(0,!1))return n.resolve(t);for(var i=r.byteLength,a=2;i>a;){var o=r.getUint16(a,!1);if(a+=2,65505===o){if(1165519206!==r.getUint32(a+=2,!1))return n.resolve(t);var l=18761===r.getUint16(a+=6,!1);a+=r.getUint32(a+4,l);var s=r.getUint16(a,l);a+=2;for(var u=0;s>u;u++)if(274===r.getUint16(a+12*u,l)){var f=r.getUint16(a+12*u+8,l);return f>=2&&8>=f&&(r.setUint16(a+12*u+8,1,l),t.fixedArrayBuffer=e.target.result),t.orientation=f,n.resolve(t)}}else{if(65280!=(65280&o))break;a+=r.getUint16(a,!1)}}return n.resolve(t)},n.promise},n.applyExifRotation=function(e){if(0!==e.type.indexOf("image/jpeg"))return n.emptyPromise(e);var r=t.defer();return n.readOrientation(e).then((function(t){return t.orientation<2||t.orientation>8?r.resolve(e):void n.dataUrl(e,!0).then((function(i){var a=document.createElement("canvas"),o=document.createElement("img");o.onload=function(){try{a.width=t.orientation>4?o.height:o.width,a.height=t.orientation>4?o.width:o.height;var i=a.getContext("2d");(function(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:e.transform(0,-1,1,0,0,n)}})(i,t.orientation,o.width,o.height),i.drawImage(o,0,0);var l=a.toDataURL(e.type||"image/WebP",.934);l=n.restoreExif(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;r>i;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}(t.fixedArrayBuffer),l);var s=n.dataUrltoBlob(l,e.name);r.resolve(s)}catch(e){return r.reject(e)}},o.onerror=function(){r.reject()},o.src=i}),(function(e){r.reject(e)}))}),(function(e){r.reject(e)})),r.promise},n.restoreExif=function(e,t){var n={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){var t,n,r,i,a,o="",l="",s="",u=0;do{r=(t=e[u++])>>2,i=(3&t)<<4|(n=e[u++])>>4,a=(15&n)<<2|(l=e[u++])>>6,s=63&l,isNaN(n)?a=s=64:isNaN(l)&&(s=64),o=o+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(s),t=n=l="",r=i=a=s=""}while(u<e.length);return o},restore:function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(i)},exifManipulation:function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},insertExif:function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),a=r.slice(0,i),o=r.slice(i),l=a;return(l=l.concat(t)).concat(o)},slice2Segments:function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var r=t+(256*e[t+2]+e[t+3])+2,i=e.slice(t,r);n.push(i),t=r}if(t>e.length)break}return n},decode64:function(e){var t,n,r,i,a="",o="",l=0,s=[];/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=this.KEY_STR.indexOf(e.charAt(l++))<<2|(r=this.KEY_STR.indexOf(e.charAt(l++)))>>4,n=(15&r)<<4|(i=this.KEY_STR.indexOf(e.charAt(l++)))>>2,a=(3&i)<<6|(o=this.KEY_STR.indexOf(e.charAt(l++))),s.push(t),64!==i&&s.push(n),64!==o&&s.push(a),t=n=a="",r=i=o=""}while(l<e.length);return s}};return n.restore(e,t)},n}]);