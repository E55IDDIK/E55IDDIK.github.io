!function(){"use strict";function e(e,n,r){var t=this;t.apiBasePath=n+"/images",t.cacheBuster=(new Date).getTime(),t.cancel=function(){t.onCancel()},t.save=function(){r.base64DataUrl(t.file).then((function(e){var n=function(e){if(!e)return null;var n=e.split(",");if(2!==n.length)return null;return n[1]}(e);n&&(t.menuItem.image_base64_encoded=n),t.saveMenuItem()}))},t.saveMenuItem=function(){return e.saveMenuItem(t.menuItem).then((function(e){t.menuItem=e,t.onSave({menuItem:e})}),(function(e){t.onError({response:e})}))},t.valid=function(){return!!t.validatePrices()&&!t.form.$invalid},t.validatePrices=function(){return t.menuItem.price_small||t.menuItem.price_large?!t.menuItem.price_small||!t.menuItem.price_large||t.menuItem.small_portion_name&&t.menuItem.large_portion_name?t.menuItem.small_portion_name&&!t.menuItem.price_small||t.menuItem.large_portion_name&&!t.menuItem.price_large?(t.priceErrorMessage="If portion is filled in, an associated price must be entered",!1):(t.priceErrorMessage="",!0):(t.priceErrorMessage="Portion names are required for both prices",!1):(t.priceErrorMessage="Price is required",!1)}}angular.module("admin").component("menuItemAdmin",{templateUrl:"src/admin/menu-item/menu-item-admin.html",bindings:{menuItem:"<",onSave:"&",onError:"&",onCancel:"&"},controller:e}),e.$inject=["MenuService","ApiPath","Upload"]}();